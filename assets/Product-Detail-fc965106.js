import{_ as b,a as m,r as p,o as v,c as g,b as e,t as f,d as l,e as P,n as r}from"./index-844939ab.js";const y={props:["dashboardId","productStatus"],data(){return{id:this.$route.params.dashboardId,url:"https://vue3-course-api.hexschool.io/v2/",api_path:"rita009",tempProduct:{imagesUrl:[]},tempUploadImg:{}}},methods:{getData(){m.get(`${this.url}api/${this.api_path}/product/${this.id}`).then(i=>{this.tempProduct=i.data.product,console.log("單一產品資訊：",this.tempProduct)}).catch(i=>{alert(i.reponse.data.message)})},updateProduct(){let i=`${this.url}api/${this.api_path}/admin/product`,t="post",n=this.productStatus;n==="false"&&(t="put",i=`${this.url}api/${this.api_path}/admin/product/${this.tempProduct.id}`),console.log("現在api",i,t,n),m[t](i,{data:this.tempProduct}).then(()=>{console.log("更新資料",this.tempProduct),this.$router.push({name:"dashboard"})}).catch(_=>{console.log(_.response.data.message)})},uploadImg(i){this.tempUploadImg=i.target.files[0];const t=new FormData;t.append("file-to-upload",this.tempUploadImg),m.post(`${this.url}api/${this.api_path}/admin/upload`,t).then(n=>{this.tempProduct.imageUrl=n.data.imageUrl,i.target.value=""}).catch(n=>{alert(n.data.message)})},goBack(){this.$router.go(-1)}},mounted(){this.productStatus==="false"&&this.getData(),console.log("動態參數資料",this.$route.params,"資料狀態",this.productStatus)}},V={class:"title"},k={class:"feild"},x={class:"feild-body"},U=e("label",{for:"title",class:"form-label"},"標題",-1),I={class:"feild-input"},B={class:"feild"},C={class:"feild-body"},D=e("label",{for:"category",class:"form-label"},"分類",-1),S={class:"feild-input"},q={class:"feild-body"},F=e("label",{for:"unit",class:"form-label"},"單位",-1),w={class:"feild-input"},M={class:"feild"},N={class:"feild-body"},E=e("label",{for:"origin-price",class:"form-label"},"原價",-1),z={class:"feild-input"},j={class:"feild-body"},A=e("label",{for:"price",class:"form-label"},"售價",-1),G={class:"feild-input"},H={class:"feild"},J={class:"feild-body"},K=e("label",{for:"description",class:"form-label"},"產品描述",-1),L={class:"feild-input"},O={class:"feild"},Q={class:"feild-body"},R=e("label",{for:"content",class:"form-label"},"說明內容",-1),T={class:"feild-input"},W={class:"feild"},X={class:"feild-body"},Y=e("label",{for:"upload-mainImg",class:"form-label"},"主要圖片上傳",-1),Z={class:"feild-input"},$=["src"],ee={class:"feild"},te={class:"feild-body"},se={class:"feild-input"},le={for:"is_enabled",class:"form-label",style:{}},oe={class:"btn-double"};function ie(i,t,n,_,o,u){const a=p("Field"),d=p("ErrorMessage"),h=p("Form");return v(),g("div",null,[e("h2",V,f(Boolean("this.productStatus")*1?"新增":"編輯")+"產品",1),l(h,{class:"table-full"},{default:P(({errors:c})=>[e("div",k,[e("div",x,[U,e("div",I,[l(a,{id:"title",name:"標題",type:"text",class:r(["form-control",{"is-invalid":c.標題}]),placeholder:"請輸入標題",rules:"required",modelValue:o.tempProduct.title,"onUpdate:modelValue":t[0]||(t[0]=s=>o.tempProduct.title=s)},null,8,["class","modelValue"])]),l(d,{name:"標題",class:"invalid-feedback"})])]),e("div",B,[e("div",C,[D,e("div",S,[l(a,{id:"category",name:"分類",type:"text",class:r(["form-control",{"is-invalid":c.分類}]),placeholder:"請輸入分類",rules:"required",modelValue:o.tempProduct.category,"onUpdate:modelValue":t[1]||(t[1]=s=>o.tempProduct.category=s)},null,8,["class","modelValue"])]),l(d,{name:"分類",class:"invalid-feedback"})]),e("div",q,[F,e("div",w,[l(a,{id:"unit",name:"單位",type:"text",class:r(["form-control",{"is-invalid":c.單位}]),placeholder:"請輸入單位",rules:"required",modelValue:o.tempProduct.unit,"onUpdate:modelValue":t[2]||(t[2]=s=>o.tempProduct.unit=s)},null,8,["class","modelValue"])]),l(d,{name:"單位",class:"invalid-feedback"})])]),e("div",M,[e("div",N,[E,e("div",z,[l(a,{id:"origin-price",name:"原價",type:"number",class:r(["form-control",{"is-invalid":c.原價}]),placeholder:"請輸入原價",rules:"required",modelValue:o.tempProduct.origin_price,"onUpdate:modelValue":t[3]||(t[3]=s=>o.tempProduct.origin_price=s),modelModifiers:{number:!0}},null,8,["class","modelValue"])]),l(d,{name:"原價",class:"invalid-feedback"})]),e("div",j,[A,e("div",G,[l(a,{id:"price",name:"售價",type:"number",class:r(["form-control",{"is-invalid":c.售價}]),placeholder:"請輸入售價",rules:"required",modelValue:o.tempProduct.price,"onUpdate:modelValue":t[4]||(t[4]=s=>o.tempProduct.price=s),modelModifiers:{number:!0}},null,8,["class","modelValue"])]),l(d,{name:"售價",class:"invalid-feedback"})])]),e("div",H,[e("div",J,[K,e("div",L,[l(a,{id:"description",name:"產品描述",type:"text",as:"textarea",class:r(["form-control",{"is-invalid":c.產品描述}]),placeholder:"請輸入產品描述",rules:"max:200",component:"textarea",modelValue:o.tempProduct.description,"onUpdate:modelValue":t[5]||(t[5]=s=>o.tempProduct.description=s)},null,8,["class","modelValue"])]),l(d,{name:"產品描述",class:"invalid-feedback"})])]),e("div",O,[e("div",Q,[R,e("div",T,[l(a,{id:"content",name:"說明內容",type:"textarea",class:r(["form-control",{"is-invalid":c.說明內容}]),as:"textarea",placeholder:"請輸入說明內容",rules:"max:200",modelValue:o.tempProduct.content,"onUpdate:modelValue":t[6]||(t[6]=s=>o.tempProduct.content=s)},null,8,["class","modelValue"])]),l(d,{name:"說明內容",class:"invalid-feedback"})])]),e("div",W,[e("div",X,[Y,e("div",Z,[l(a,{id:"upload-mainImg",name:"主要圖片",type:"file",class:"form-control",onChange:u.uploadImg},null,8,["onChange"])]),e("img",{class:"upload-img",src:o.tempProduct.imageUrl,alt:""},null,8,$),l(d,{name:"主要圖片",class:"invalid-feedback"})])]),e("div",ee,[e("div",te,[e("div",se,[l(a,{id:"is_enabled",name:"是否啟用",type:"checkbox",class:"form-control",value:"true",modelValue:o.tempProduct.is_enabled,"onUpdate:modelValue":t[7]||(t[7]=s=>o.tempProduct.is_enabled=s)},null,8,["modelValue"]),e("label",le,"是否啟用"+f(o.tempProduct.is_enabled),1)]),l(d,{name:"是否啟用",class:"invalid-feedback"})])]),e("div",oe,[e("button",{class:"btn btn-secondary-outline btn-lg",type:"submit",onClick:t[8]||(t[8]=(...s)=>u.goBack&&u.goBack(...s))},"取消"),e("button",{class:"btn btn-secondary btn-lg",type:"button",onClick:t[9]||(t[9]=(...s)=>u.updateProduct&&u.updateProduct(...s))},"確定")])]),_:1})])}const de=b(y,[["render",ie]]);export{de as default};
