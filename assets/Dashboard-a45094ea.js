import{_,o as c,c as r,b as t,f as g,t as l,n as u,g as h,F as $,h as f,a as p,r as v,w as x,v as k,d as w,i as C}from"./index-251a88ef.js";const N={props:["tempProduct","closeModal","delProduct"]},D={class:"modal modal-bg"},M={class:"modal-box modal-box-s"},V=t("h2",{class:"modal-title"},"刪除品項",-1),B={class:"modal-body"},L={class:"content"},S=t("h4",{class:"remark"},"（刪除後將無法恢復）",-1),U={class:"modal-btn modal-btn-double"};function z(o,e,s,b,d,n){return c(),r("div",D,[t("div",M,[V,t("div",B,[t("h3",L,[g("您確定要刪除 "),t("span",null,l(s.tempProduct.title),1),g(" 商品嗎？")]),S]),t("div",U,[t("button",{type:"button",class:"btn btn-sub",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},"取消"),t("button",{type:"button",class:"btn btn-main",onClick:e[1]||(e[1]=(...a)=>s.delProduct&&s.delProduct(...a))},"確定")])])])}const F=_(N,[["render",z]]),y="/assets/pagination-arrow-b8379621.svg",A={props:["getProduct","pages"]},E={class:"pagination"},I={class:"pagination-box"},T={class:"pagination-item"},j=t("img",{src:y,alt:""},null,-1),q=[j],G=["onClick"],H={class:"pagination-item"},J=t("img",{src:y,alt:""},null,-1),K=[J];function O(o,e,s,b,d,n){return c(),r("div",E,[t("ul",I,[t("li",T,[t("a",{class:u(["",{disable:!s.pages.has_pre}]),href:"",onClick:e[0]||(e[0]=h(a=>s.getProduct(s.pages.current_page-1),["prevent"]))},q,2)]),(c(!0),r($,null,f(s.pages.total_pages,a=>(c(),r("li",{class:"pagination-item",key:a+"page"},[t("a",{class:u(["pagination-link",{active:a===s.pages.current_page}]),href:"#",onClick:h(m=>s.getProduct(a),["prevent"])},l(a),11,G)]))),128)),t("li",H,[t("a",{class:u(["pagination-next",{disable:!s.pages.has_next}]),href:"#",onClick:e[1]||(e[1]=h(a=>s.getProduct(s.pages.current_page+1),["prevent"]))},K,2)])])])}const Q=_(A,[["render",O]]),R={data(){return{url:"https://vue3-course-api.hexschool.io/v2/",api_path:"rita009",products:{},tempProduct:{imagesUrl:[]},tempUploadImg:{},isNew:!1,page:{},showComponent:!1}},methods:{getProduct(o=1){p.get(`${this.url}api/${this.api_path}/admin/products/?page=${o}`).then(e=>{this.products=e.data.products,this.page=e.data.pagination,console.log("取得產品列表",this.products)}).catch(e=>{alert(e.response.data.message)})},goDetail(o,e){o==="add"?(this.isNew=!0,this.tempProduct={imagesUrl:[]},this.$router.push({path:`dashboard-product-detail/${this.tempProduct.id}/${this.isNew}`})):o==="edit"?(this.tempProduct={...e},this.$router.push({path:`dashboard-product-detail/${this.tempProduct.id}/${this.isNew}`})):o==="delete"&&(this.showComponent=!0,this.tempProduct={...e})},closeModal(){this.showComponent=!1},delProduct(){p.delete(`${this.url}api/${this.api_path}/admin/product/${this.tempProduct.id}`).then(()=>{this.getProduct(),this.closeModal()}).catch(o=>{alert(o.response.data.message)})}},watch:{showComponent:function(o){o===!0?document.body.classList.add("overflow-y-hid"):document.body.classList.remove("overflow-y-hid")}},components:{delProductVue:F,pagination:Q},mounted(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)rita009\s*\=\s*([^;]*).*$)|^.*$/,"$1");p.defaults.headers.common.Authorization=o,this.getProduct()}},W={class:"table"},X=C('<ul class="table-head"><li class="table-head-item w-1">分類</li><li class="table-head-item w-5">產品名稱</li><li class="table-head-item w-1 text-right">原價</li><li class="table-head-item w-1 text-right">售價</li><li class="table-head-item w-1 text-center">是否啟用</li><li class="table-head-item w-1 text-center">操作</li></ul>',1),Y={class:"table-body"},Z={class:"table-body-data w-1"},tt={class:"table-body-data w-5"},et={class:"table-body-data w-1 text-right"},st={class:"table-body-data w-1 text-right"},ot={class:"table-body-data w-1 text-center text-primary"},at={class:"table-body-data table-btn w-1 text-center"},it=["onClick"],nt=["onClick"];function dt(o,e,s,b,d,n){const a=v("del-product-vue"),m=v("pagination");return c(),r("div",{class:u({"overflow-y-hid":d.showComponent})},[x(w(a,{"temp-product":d.tempProduct,"close-modal":n.closeModal,"del-product":n.delProduct},null,8,["temp-product","close-modal","del-product"]),[[k,d.showComponent]]),t("button",{type:"button",class:"btn btn-m margin-right",onClick:e[0]||(e[0]=i=>n.goDetail("add",o.item))}," 新增產品 "),t("div",W,[X,t("ul",Y,[(c(!0),r($,null,f(d.products,i=>(c(),r("li",{key:i.id,class:"table-body-item"},[t("div",Z,l(i.category),1),t("div",tt,l(i.title),1),t("div",et,"$ "+l(i.origin_price),1),t("div",st,"$ "+l(i.price),1),t("div",ot,l(i.is_enabled?"啟用":"未啟用"),1),t("div",at,[t("button",{type:"button",class:"btn btn-s btn-secondary",onClick:P=>n.goDetail("edit",i)}," 編輯 ",8,it),t("button",{type:"button",class:"btn btn-s btn-secondary-outline",onClick:P=>n.goDetail("delete",i)}," 刪除 ",8,nt)])]))),128))])]),w(m,{"get-product":n.getProduct,pages:d.page},null,8,["get-product","pages"])],2)}const ct=_(R,[["render",dt]]);export{ct as default};
